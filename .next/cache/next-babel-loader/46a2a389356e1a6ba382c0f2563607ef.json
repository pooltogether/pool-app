{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar queryString = require('query-string');\n\nexport var queryParamUpdater = {\n  add: function add(router, addition) {\n    var pathnameParts = [].concat(router.pathname.split('?'));\n    var asPathParts = [].concat(router.asPath.split('?'));\n    var hasQueryParams = /\\?/.test(router.asPath);\n\n    var newParams = _objectSpread({}, addition);\n\n    if (hasQueryParams) {\n      var existing = queryString.parse(\"?\".concat(asPathParts.pop()));\n      newParams = _objectSpread(_objectSpread({}, existing), addition);\n    }\n\n    var newPathname = \"\".concat(pathnameParts.shift(), \"?\").concat(queryString.stringify(newParams));\n    var newAsPath = \"\".concat(asPathParts.shift(), \"?\").concat(queryString.stringify(newParams));\n    router.push(newPathname, newAsPath, {\n      shallow: true\n    });\n    return router.asPath.toString();\n  },\n  removeAll: function removeAll(router) {\n    var pathnameParts = [].concat(router.pathname.split('?'));\n    var asPathParts = [].concat(router.asPath.split('?'));\n    var newPathname = pathnameParts.shift();\n    var newAsPath = asPathParts.shift();\n    router.push(newPathname, newAsPath, {\n      shallow: true\n    });\n    return router.asPath.toString();\n  },\n  remove: function remove(router, key) {\n    var pathnameParts = [].concat(router.pathname.split('?'));\n    var asPathParts = [].concat(router.asPath.split('?'));\n    var hasQueryParams = /\\?/.test(router.asPath);\n\n    if (hasQueryParams) {\n      var existing = queryString.parse(\"?\".concat(asPathParts.pop()));\n      delete existing[key];\n      var hasNoMoreKeys = true;\n\n      for (var _i = 0, _Object$keys = Object.keys(existing); _i < _Object$keys.length; _i++) {\n        var _key = _Object$keys[_i];\n        hasNoMoreKeys = false;\n      }\n\n      if (hasNoMoreKeys) {\n        router.push(pathnameParts.shift(), asPathParts.shift(), {\n          shallow: true\n        });\n      } else {\n        var newPathname = \"\".concat(pathnameParts.shift(), \"?\").concat(queryString.stringify(existing));\n        var newAsPath = \"\".concat(asPathParts.shift(), \"?\").concat(queryString.stringify(existing));\n        router.push(newPathname, newAsPath, {\n          shallow: true\n        });\n      }\n    }\n\n    return router.asPath.toString();\n  }\n};","map":{"version":3,"sources":["/Users/chuckbergeron/Git/crypto/pool-together/pool-app/lib/utils/queryParamUpdater.js"],"names":["queryString","require","queryParamUpdater","add","router","addition","pathnameParts","concat","pathname","split","asPathParts","asPath","hasQueryParams","test","newParams","existing","parse","pop","newPathname","shift","stringify","newAsPath","push","shallow","toString","removeAll","remove","key","hasNoMoreKeys","Object","keys"],"mappings":"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","sourcesContent":["const queryString = require('query-string')\n\nexport const queryParamUpdater = {\n  add: (router, addition) => {\n    const pathnameParts = [].concat(router.pathname.split('?'))\n    const asPathParts = [].concat(router.asPath.split('?'))\n\n    const hasQueryParams = /\\?/.test(router.asPath)\n\n    let newParams = { ...addition }\n    if (hasQueryParams) {\n      const existing = queryString.parse(`?${asPathParts.pop()}`)\n\n      newParams = {\n        ...existing,\n        ...addition\n      }\n    }\n\n    const newPathname = `${pathnameParts.shift()}?${queryString.stringify(newParams)}`\n    const newAsPath = `${asPathParts.shift()}?${queryString.stringify(newParams)}`\n\n    router.push(\n      newPathname,\n      newAsPath,\n      { shallow: true }\n    )\n\n    return router.asPath.toString()\n  },\n\n  removeAll: (router) => {\n    const pathnameParts = [].concat(router.pathname.split('?'))\n    const asPathParts = [].concat(router.asPath.split('?'))\n\n    const newPathname = pathnameParts.shift()\n    const newAsPath = asPathParts.shift()\n\n    router.push(\n      newPathname,\n      newAsPath,\n      { shallow: true }\n    )\n\n    return router.asPath.toString()\n  },\n\n  remove: (router, key) => {\n    const pathnameParts = [].concat(router.pathname.split('?'))\n    const asPathParts = [].concat(router.asPath.split('?'))\n\n    const hasQueryParams = /\\?/.test(router.asPath)\n\n    if (hasQueryParams) {\n      const existing = queryString.parse(`?${asPathParts.pop()}`)\n\n      delete existing[key]\n\n      let hasNoMoreKeys = true\n      for (const key of Object.keys(existing)) {\n        hasNoMoreKeys = false\n      }\n\n      if (hasNoMoreKeys) {\n        router.push(\n          pathnameParts.shift(),\n          asPathParts.shift(),\n          { shallow: true }\n        )\n      } else {\n        const newPathname = `${pathnameParts.shift()}?${queryString.stringify(existing)}`\n        const newAsPath = `${asPathParts.shift()}?${queryString.stringify(existing)}`\n\n        router.push(\n          newPathname,\n          newAsPath,\n          { shallow: true }\n        )\n      }\n    }\n\n    return router.asPath.toString()\n  }\n\n}\n"]},"metadata":{},"sourceType":"module"}