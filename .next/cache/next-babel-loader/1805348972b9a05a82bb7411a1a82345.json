{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useContext } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useRouter } from 'next/router';\nimport { useTranslation } from 'lib/../i18n';\nimport { AuthControllerContext } from 'lib/components/contextProviders/AuthControllerContextProvider';\nimport { PlayerDataContext } from 'lib/components/contextProviders/PlayerDataContextProvider';\nimport { PoolDataContext } from 'lib/components/contextProviders/PoolDataContextProvider';\nimport { ButtonDrawer } from 'lib/components/ButtonDrawer';\nimport { Button } from 'lib/components/Button';\nimport { ErrorsBox } from 'lib/components/ErrorsBox';\nimport { WithdrawOdds } from 'lib/components/WithdrawOdds';\nimport { TextInputGroup } from 'lib/components/TextInputGroup';\nimport { usePlayerQuery } from 'lib/hooks/usePlayerQuery';\nimport { queryParamUpdater } from 'lib/utils/queryParamUpdater';\nimport { numberWithCommas } from 'lib/utils/numberWithCommas';\nimport { testAddress } from 'lib/utils/testAddress';\nimport TicketIcon from 'assets/images/icon-ticket-green@2x.png';\nexport function WithdrawTicketsForm(props) {\n  const {\n    t\n  } = useTranslation();\n  const {\n    nextStep\n  } = props;\n  const router = useRouter();\n  const {\n    chainId,\n    pauseQueries,\n    usersAddress\n  } = useContext(AuthControllerContext);\n  const {\n    pool\n  } = useContext(PoolDataContext);\n  const {\n    usersTicketBalance,\n    usersTicketBalanceBN\n  } = useContext(PlayerDataContext);\n  const playerAddressError = testAddress(usersAddress);\n  const blockNumber = -1;\n  const {\n    status,\n    data: playerData,\n    error,\n    isFetching\n  } = usePlayerQuery(pauseQueries, chainId, usersAddress, blockNumber, playerAddressError);\n\n  if (error) {\n    console.error(error);\n  }\n\n  const ticker = pool === null || pool === void 0 ? void 0 : pool.underlyingCollateralSymbol;\n  const tickerUpcased = ticker === null || ticker === void 0 ? void 0 : ticker.toUpperCase();\n  const {\n    handleSubmit,\n    register,\n    errors,\n    formState,\n    watch,\n    setValue\n  } = useForm({\n    mode: 'all',\n    reValidateMode: 'onChange'\n  });\n  const watchQuantity = watch('quantity');\n  const validate = {\n    greaterThanBalance: value => parseFloat(value) <= usersTicketBalance || t('pleaseEnterAmountLowerThanTicketBalance')\n  };\n\n  const onSubmit = values => {\n    if (formState.isValid) {\n      queryParamUpdater.add(router, {\n        quantity: values.quantity,\n        prevBalance: usersTicketBalanceBN.toString()\n      });\n      nextStep();\n    }\n  };\n\n  const continueButton = __jsx(Button, {\n    textSize: \"lg\",\n    disabled: !formState.isValid,\n    onClick: handleSubmit(onSubmit),\n    className: 'mx-auto'\n  }, t('continue'));\n\n  return __jsx(React.Fragment, null, __jsx(\"form\", {\n    onSubmit: handleSubmit(onSubmit)\n  }, __jsx(TextInputGroup, {\n    unsignedNumber: true,\n    id: \"quantity\",\n    name: \"quantity\",\n    register: register,\n    validate: validate,\n    label: t('enterAmountToWithdraw'),\n    required: t('ticketQuantityRequired'),\n    autoComplete: \"off\",\n    rightLabel: usersAddress && usersTicketBalance && __jsx(React.Fragment, null, __jsx(\"button\", {\n      type: \"button\",\n      className: \"font-bold inline-flex items-center\",\n      onClick: e => {\n        e.preventDefault();\n        setValue('quantity', usersTicketBalance, {\n          shouldValidate: true\n        });\n      }\n    }, __jsx(\"img\", {\n      src: TicketIcon,\n      className: \"mr-2\",\n      style: {\n        maxHeight: 12\n      }\n    }), \" \", numberWithCommas(usersTicketBalance, {\n      precision: 2\n    }), \" \", tickerUpcased))\n  }), __jsx(\"div\", {\n    className: \"mt-2 text-sm text-highlight-1 mb-2\",\n    style: {\n      minHeight: 24\n    }\n  }, Object.values(errors).length > 0 ? __jsx(React.Fragment, null, __jsx(ErrorsBox, {\n    errors: errors\n  })) : __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"odds-box mx-auto font-normal text-xxs xs:text-xs text-orange\",\n    style: {\n      maxWidth: 500\n    }\n  }, __jsx(WithdrawOdds, {\n    pool: pool,\n    usersBalance: usersTicketBalance,\n    quantity: watchQuantity\n  })))), __jsx(ButtonDrawer, null, continueButton)));\n}","map":{"version":3,"sources":["/Users/chuckbergeron/Git/crypto/pool-together/pool-app/lib/components/WithdrawTicketsForm.jsx"],"names":["React","useContext","useForm","useRouter","useTranslation","AuthControllerContext","PlayerDataContext","PoolDataContext","ButtonDrawer","Button","ErrorsBox","WithdrawOdds","TextInputGroup","usePlayerQuery","queryParamUpdater","numberWithCommas","testAddress","TicketIcon","WithdrawTicketsForm","props","t","nextStep","router","chainId","pauseQueries","usersAddress","pool","usersTicketBalance","usersTicketBalanceBN","playerAddressError","blockNumber","status","data","playerData","error","isFetching","console","ticker","underlyingCollateralSymbol","tickerUpcased","toUpperCase","handleSubmit","register","errors","formState","watch","setValue","mode","reValidateMode","watchQuantity","validate","greaterThanBalance","value","parseFloat","onSubmit","values","isValid","add","quantity","prevBalance","toString","continueButton","e","preventDefault","shouldValidate","maxHeight","precision","minHeight","Object","length","maxWidth"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react'\nimport { useForm } from 'react-hook-form'\nimport { useRouter } from 'next/router'\n\nimport { useTranslation } from 'lib/../i18n'\nimport { AuthControllerContext } from 'lib/components/contextProviders/AuthControllerContextProvider'\nimport { PlayerDataContext } from 'lib/components/contextProviders/PlayerDataContextProvider'\nimport { PoolDataContext } from 'lib/components/contextProviders/PoolDataContextProvider'\nimport { ButtonDrawer } from 'lib/components/ButtonDrawer'\nimport { Button } from 'lib/components/Button'\nimport { ErrorsBox } from 'lib/components/ErrorsBox'\nimport { WithdrawOdds } from 'lib/components/WithdrawOdds'\nimport { TextInputGroup } from 'lib/components/TextInputGroup'\nimport { usePlayerQuery } from 'lib/hooks/usePlayerQuery'\nimport { queryParamUpdater } from 'lib/utils/queryParamUpdater'\nimport { numberWithCommas } from 'lib/utils/numberWithCommas'\nimport { testAddress } from 'lib/utils/testAddress'\n\nimport TicketIcon from 'assets/images/icon-ticket-green@2x.png'\n\nexport function WithdrawTicketsForm(props) {\n  const { t } = useTranslation()\n\n  const {\n    nextStep,\n  } = props\n  \n  const router = useRouter()\n\n  const { chainId, pauseQueries, usersAddress } = useContext(AuthControllerContext)\n  const { pool } = useContext(PoolDataContext)\n  const { usersTicketBalance, usersTicketBalanceBN } = useContext(PlayerDataContext)\n\n\n  const playerAddressError = testAddress(usersAddress)\n\n  const blockNumber = -1\n  const {\n    status,\n    data: playerData,\n    error,\n    isFetching\n  } = usePlayerQuery(pauseQueries, chainId, usersAddress, blockNumber, playerAddressError)\n\n  if (error) {\n    console.error(error)\n  }\n\n\n  const ticker = pool?.underlyingCollateralSymbol\n  const tickerUpcased = ticker?.toUpperCase()\n\n  const {\n    handleSubmit,\n    register,\n    errors,\n    formState,\n    watch,\n    setValue\n  } = useForm({\n    mode: 'all',\n    reValidateMode: 'onChange',\n  })\n\n  const watchQuantity = watch('quantity')\n\n  const validate = {\n    greaterThanBalance: value => parseFloat(value) <= usersTicketBalance ||\n      t('pleaseEnterAmountLowerThanTicketBalance'),\n  }\n\n  const onSubmit = (values) => {\n    if (formState.isValid) {\n      queryParamUpdater.add(router, {\n        quantity: values.quantity,\n        prevBalance: usersTicketBalanceBN.toString()\n      })\n\n      nextStep()\n    }\n  }\n\n  const continueButton = <Button\n    textSize='lg'\n    disabled={!formState.isValid}\n    onClick={handleSubmit(onSubmit)}\n    className={'mx-auto'}\n  >\n    {t('continue')}\n  </Button>\n\n  return <>\n    <form\n      onSubmit={handleSubmit(onSubmit)}\n    >\n      <TextInputGroup\n        unsignedNumber\n        id='quantity'\n        name='quantity'\n        register={register}\n        validate={validate}\n        label={t('enterAmountToWithdraw')}\n        required={t('ticketQuantityRequired')}\n        autoComplete='off'\n\n        rightLabel={usersAddress && usersTicketBalance && <>\n          <button\n            type='button'\n            className='font-bold inline-flex items-center'\n            onClick={(e) => {\n              e.preventDefault()\n              setValue('quantity', usersTicketBalance, { shouldValidate: true })\n            }}\n          >\n            <img\n              src={TicketIcon}\n              className='mr-2'\n              style={{ maxHeight: 12 }}\n            /> {numberWithCommas(usersTicketBalance, { precision: 2 })} {tickerUpcased}\n          </button>\n        </>}\n      />\n\n      <div\n        className='mt-2 text-sm text-highlight-1 mb-2'\n        style={{\n          minHeight: 24\n        }}\n      >\n        {Object.values(errors).length > 0 ? <>\n          <ErrorsBox\n            errors={errors}\n          />\n        </> : <>\n            <div\n              className='odds-box mx-auto font-normal text-xxs xs:text-xs text-orange'\n              style={{\n                maxWidth: 500\n              }}\n            >\n              <WithdrawOdds\n                pool={pool}\n                usersBalance={usersTicketBalance}\n                quantity={watchQuantity}\n              />\n            </div>\n          </>}\n      </div>\n\n      <ButtonDrawer>\n        {continueButton}\n      </ButtonDrawer>\n    </form>\n\n  </>\n}\n"]},"metadata":{},"sourceType":"module"}