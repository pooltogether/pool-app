{"ast":null,"code":"var _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useContext, useEffect } from 'react';\nimport { ethers } from 'ethers';\nimport { useForm } from 'react-hook-form';\nimport { useRouter } from 'next/router';\nimport { Trans, useTranslation } from 'lib/../i18n';\nimport { AuthControllerContext } from 'lib/components/contextProviders/AuthControllerContextProvider';\nimport { PlayerDataContext } from 'lib/components/contextProviders/PlayerDataContextProvider';\nimport { PoolDataContext } from 'lib/components/contextProviders/PoolDataContextProvider';\nimport { ButtonDrawer } from 'lib/components/ButtonDrawer';\nimport { Button } from 'lib/components/Button';\nimport { ErrorsBox } from 'lib/components/ErrorsBox';\nimport { NoMoreTicketsPane } from 'lib/components/NoMoreTicketsPane';\nimport { Odds } from 'lib/components/Odds';\nimport { PaneTitle } from 'lib/components/PaneTitle';\nimport { TextInputGroup } from 'lib/components/TextInputGroup';\nimport { WyreTopUpBalanceDropdown } from 'lib/components/WyreTopUpBalanceDropdown';\nimport { queryParamUpdater } from 'lib/utils/queryParamUpdater';\nimport { numberWithCommas } from 'lib/utils/numberWithCommas';\nimport { usersDataForPool } from 'lib/utils/usersDataForPool';\nvar bn = ethers.utils.bigNumberify;\nexport function DepositTicketQuantityForm(props) {\n  _s();\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var balanceJsx = props.balanceJsx,\n      formName = props.formName,\n      formSubName = props.formSubName,\n      iconSrc = props.iconSrc,\n      nextStep = props.nextStep;\n  var router = useRouter();\n  var quantity = router.query.quantity;\n\n  var _useContext = useContext(AuthControllerContext),\n      usersAddress = _useContext.usersAddress;\n\n  var _useContext2 = useContext(PoolDataContext),\n      pool = _useContext2.pool,\n      usersChainData = _useContext2.usersChainData;\n\n  var _useContext3 = useContext(PlayerDataContext),\n      usersTicketBalance = _useContext3.usersTicketBalance,\n      usersTicketBalanceBN = _useContext3.usersTicketBalanceBN;\n\n  var liquidityCap = (pool === null || pool === void 0 ? void 0 : pool.liquidityCap) ? bn(pool === null || pool === void 0 ? void 0 : pool.liquidityCap) : bn(0);\n  var remainingTickets;\n\n  if (liquidityCap.gt(0)) {\n    remainingTickets = liquidityCap.sub(pool.ticketSupply).div(ethers.constants.WeiPerEther);\n  }\n\n  var ticker = pool === null || pool === void 0 ? void 0 : pool.underlyingCollateralSymbol;\n  var tickerUpcased = ticker === null || ticker === void 0 ? void 0 : ticker.toUpperCase();\n\n  var _useForm = useForm({\n    mode: 'all',\n    reValidateMode: 'onChange'\n  }),\n      handleSubmit = _useForm.handleSubmit,\n      register = _useForm.register,\n      errors = _useForm.errors,\n      formState = _useForm.formState,\n      watch = _useForm.watch,\n      setValue = _useForm.setValue;\n\n  useEffect(function () {\n    if (quantity) {\n      setValue('quantity', quantity, {\n        shouldValidate: true\n      });\n    }\n  }, []);\n  var watchQuantity = watch('quantity');\n\n  var _usersDataForPool = usersDataForPool(pool, usersChainData),\n      usersTokenBalance = _usersDataForPool.usersTokenBalance;\n\n  var onSubmit = function onSubmit(values) {\n    if (formState.isValid) {\n      queryParamUpdater.add(router, {\n        quantity: values.quantity,\n        prevBalance: usersTicketBalanceBN.toString()\n      });\n      nextStep();\n    }\n  };\n\n  var continueButton = __jsx(Button, {\n    textSize: \"lg\",\n    disabled: !formState.isValid,\n    onClick: handleSubmit(onSubmit),\n    className: 'mx-auto'\n  }, t('continue'));\n\n  if (remainingTickets && remainingTickets.lt('1')) {\n    return __jsx(NoMoreTicketsPane, null);\n  }\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"pane-title\"\n  }, __jsx(PaneTitle, {\n    \"short\": true\n  }, formName), __jsx(\"div\", {\n    className: \"mb-6 -mt-2\"\n  }, __jsx(PaneTitle, {\n    small: true\n  }, formSubName))), balanceJsx && __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"mb-12\"\n  }, balanceJsx)), __jsx(\"form\", {\n    onSubmit: handleSubmit(onSubmit)\n  }, __jsx(\"div\", {\n    className: \"w-full mx-auto\"\n  }, __jsx(TextInputGroup, {\n    unsignedNumber: true,\n    autoFocus: true,\n    id: \"quantity\",\n    name: \"quantity\",\n    register: register,\n    label: t('ticketAmount'),\n    required: t('ticketQuantityRequired'),\n    autoComplete: \"off\",\n    bottomRightLabel: usersAddress && tickerUpcased && __jsx(React.Fragment, null, __jsx(WyreTopUpBalanceDropdown, {\n      label: __jsx(React.Fragment, null, __jsx(Trans, {\n        i18nKey: \"topUpBalance\",\n        defaults: \"<visibleMobile>Buy crypto</visibleMobile><hiddenMobile>Buy more crypto</hiddenMobile>\",\n        components: {\n          visibleMobile: __jsx(\"span\", {\n            className: \"xs:hidden ml-1\"\n          }),\n          hiddenMobile: __jsx(\"span\", {\n            className: \"hidden xs:inline-block ml-1\"\n          })\n        }\n      })),\n      textColor: \"text-default-soft\",\n      hoverTextColor: \"text-highlight-1\",\n      tickerUpcased: tickerUpcased,\n      usersAddress: usersAddress\n    })),\n    rightLabel: usersAddress && tickerUpcased && __jsx(React.Fragment, null, __jsx(\"button\", {\n      type: \"button\",\n      className: \"font-bold inline-flex items-center\",\n      onClick: function onClick(e) {\n        e.preventDefault();\n        setValue('quantity', usersTokenBalance, {\n          shouldValidate: true\n        });\n      }\n    }, __jsx(\"img\", {\n      src: iconSrc,\n      className: \"mr-2\",\n      style: {\n        maxHeight: 12\n      }\n    }), \" \", numberWithCommas(usersTokenBalance, {\n      precision: 2\n    }), \" \", tickerUpcased))\n  })), __jsx(\"div\", {\n    className: \"mt-2 text-sm text-highlight-1 font-bold mb-2\",\n    style: {\n      minHeight: 24\n    }\n  }, Object.values(errors).length > 0 ? __jsx(React.Fragment, null, __jsx(ErrorsBox, {\n    errors: errors\n  })) : __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"odds-box\"\n  }, __jsx(Odds, {\n    sayEveryWeek: true,\n    showLabel: true,\n    splitLines: true,\n    pool: pool,\n    usersBalance: usersTicketBalance,\n    additionalQuantity: watchQuantity\n  })))), __jsx(\"div\", {\n    className: \"flex flex-col mx-auto w-full mx-auto items-center justify-center\"\n  }, __jsx(ButtonDrawer, null, continueButton))), remainingTickets && remainingTickets.lt('1000000') && __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"mt-4 xs:mt-10 sm:mt-20 p-2 liquidity-cap text-xxs xs:text-xs sm:text-base text-white bg-raspberry border-highlight-7 border-2 rounded-sm\"\n  }, __jsx(\"span\", {\n    className: \"text-red font-bold block sm:inline-block text-lg sm:text-base sm:relative\",\n    role: \"img\",\n    \"aria-label\": \"double exclaimation\",\n    style: {\n      top: 1\n    }\n  }, \"\\u203C\"), \" \", t('onlyAmountTicketsRemaining', {\n    amount: numberWithCommas(remainingTickets.toString(), {\n      precision: 0\n    })\n  }), \" \", __jsx(\"span\", {\n    className: \"text-red font-bold hidden sm:inline-block sm:relative\",\n    role: \"img\",\n    \"aria-label\": \"double exclaimation\",\n    style: {\n      top: 1\n    }\n  }, \"\\u203C\"))));\n}\n\n_s(DepositTicketQuantityForm, \"r4Au2dK3oSUpO9nFdye6/7i1mWI=\", false, function () {\n  return [useTranslation, useRouter, useForm];\n});\n\n_c = DepositTicketQuantityForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"DepositTicketQuantityForm\");","map":{"version":3,"sources":["/Users/chuckbergeron/Git/crypto/pool-together/pool-app/lib/components/DepositTicketQuantityForm.jsx"],"names":["React","useContext","useEffect","ethers","useForm","useRouter","Trans","useTranslation","AuthControllerContext","PlayerDataContext","PoolDataContext","ButtonDrawer","Button","ErrorsBox","NoMoreTicketsPane","Odds","PaneTitle","TextInputGroup","WyreTopUpBalanceDropdown","queryParamUpdater","numberWithCommas","usersDataForPool","bn","utils","bigNumberify","DepositTicketQuantityForm","props","t","balanceJsx","formName","formSubName","iconSrc","nextStep","router","quantity","query","usersAddress","pool","usersChainData","usersTicketBalance","usersTicketBalanceBN","liquidityCap","remainingTickets","gt","sub","ticketSupply","div","constants","WeiPerEther","ticker","underlyingCollateralSymbol","tickerUpcased","toUpperCase","mode","reValidateMode","handleSubmit","register","errors","formState","watch","setValue","shouldValidate","watchQuantity","usersTokenBalance","onSubmit","values","isValid","add","prevBalance","toString","continueButton","lt","visibleMobile","hiddenMobile","e","preventDefault","maxHeight","precision","minHeight","Object","length","top","amount"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect } from 'react'\nimport { ethers } from 'ethers'\nimport { useForm } from 'react-hook-form'\nimport { useRouter } from 'next/router'\n\nimport { Trans, useTranslation } from 'lib/../i18n'\nimport { AuthControllerContext } from 'lib/components/contextProviders/AuthControllerContextProvider'\nimport { PlayerDataContext } from 'lib/components/contextProviders/PlayerDataContextProvider'\nimport { PoolDataContext } from 'lib/components/contextProviders/PoolDataContextProvider'\nimport { ButtonDrawer } from 'lib/components/ButtonDrawer'\nimport { Button } from 'lib/components/Button'\nimport { ErrorsBox } from 'lib/components/ErrorsBox'\nimport { NoMoreTicketsPane } from 'lib/components/NoMoreTicketsPane'\nimport { Odds } from 'lib/components/Odds'\nimport { PaneTitle } from 'lib/components/PaneTitle'\nimport { TextInputGroup } from 'lib/components/TextInputGroup'\nimport { WyreTopUpBalanceDropdown } from 'lib/components/WyreTopUpBalanceDropdown'\nimport { queryParamUpdater } from 'lib/utils/queryParamUpdater'\nimport { numberWithCommas } from 'lib/utils/numberWithCommas'\nimport { usersDataForPool } from 'lib/utils/usersDataForPool'\n\nconst bn = ethers.utils.bigNumberify\n\nexport function DepositTicketQuantityForm(props) {\n  const { t } = useTranslation()\n\n  const {\n    balanceJsx,\n    formName,\n    formSubName,\n    iconSrc,\n    nextStep,\n  } = props\n  \n  const router = useRouter()\n  const quantity = router.query.quantity\n\n  const { usersAddress } = useContext(AuthControllerContext)\n  const { pool, usersChainData } = useContext(PoolDataContext)\n  const { usersTicketBalance, usersTicketBalanceBN } = useContext(PlayerDataContext)\n\n  const liquidityCap = pool?.liquidityCap ? bn(pool?.liquidityCap) : bn(0)\n  let remainingTickets\n  if (liquidityCap.gt(0)) {\n    remainingTickets = liquidityCap\n      .sub(pool.ticketSupply).div(ethers.constants.WeiPerEther)\n  }\n\n  const ticker = pool?.underlyingCollateralSymbol\n  const tickerUpcased = ticker?.toUpperCase()\n\n  const {\n    handleSubmit,\n    register,\n    errors,\n    formState,\n    watch,\n    setValue\n  } = useForm({\n    mode: 'all',\n    reValidateMode: 'onChange',\n  })\n\n  useEffect(() => {\n    if (quantity) {\n      setValue('quantity', quantity, { shouldValidate: true })\n    }\n  }, [])\n\n  const watchQuantity = watch('quantity')\n\n  const {\n    usersTokenBalance,\n  } = usersDataForPool(pool, usersChainData)\n\n  const onSubmit = (values) => {\n    if (formState.isValid) {\n      queryParamUpdater.add(router, {\n        quantity: values.quantity,\n        prevBalance: usersTicketBalanceBN.toString()\n      })\n\n      nextStep()\n    }\n  }\n\n  const continueButton = <Button\n    textSize='lg'\n    disabled={!formState.isValid}\n    onClick={handleSubmit(onSubmit)}\n    className={'mx-auto'}\n  >\n    {t('continue')}\n  </Button>\n\n  if (remainingTickets && remainingTickets.lt('1')) {\n    return <NoMoreTicketsPane />\n  }\n\n  return <>\n    <div\n      className='pane-title'\n    >\n      <PaneTitle\n        short\n      >\n        {formName}\n      </PaneTitle>\n      <div className='mb-6 -mt-2'>\n        <PaneTitle\n          small\n        >\n          {formSubName}\n        </PaneTitle>\n      </div>\n    </div>\n\n    {balanceJsx && <>\n      <div className='mb-12'>\n        {balanceJsx}\n      </div>\n    </>}\n\n    {/* {poolIsLocked && <>\n      <Modal\n        header={`${tickerUpcased} Pool locked`}\n        visible={true}\n      >\n        <h3>\n          This Pool's prize is currently being awarded - until awarding is complete it can not accept deposits or withdrawals.\n\n          <br/>\n          Show time til unlocked: ...\n        </h3>\n      </Modal>\n    </>} */}\n\n    <form\n      onSubmit={handleSubmit(onSubmit)}\n    >\n      <div\n        className='w-full mx-auto'\n      >\n        <TextInputGroup\n          unsignedNumber\n          autoFocus\n          id='quantity'\n          name='quantity'\n          register={register}\n          label={t('ticketAmount')}\n          required={t('ticketQuantityRequired')}\n          autoComplete='off'\n          bottomRightLabel={usersAddress && tickerUpcased && <>\n            <WyreTopUpBalanceDropdown\n              label={<>\n                <Trans\n                  i18nKey='topUpBalance'\n                  defaults='<visibleMobile>Buy crypto</visibleMobile><hiddenMobile>Buy more crypto</hiddenMobile>'\n                  components={{\n                    visibleMobile: <span\n                      className='xs:hidden ml-1'\n                    />,\n                    hiddenMobile: <span\n                      className='hidden xs:inline-block ml-1'\n                    />\n                  }}\n                />\n              </>}\n              textColor='text-default-soft'\n              hoverTextColor='text-highlight-1'\n              tickerUpcased={tickerUpcased}\n              usersAddress={usersAddress}\n            />\n          </>}\n          rightLabel={usersAddress && tickerUpcased && <>\n              <button\n                type='button'\n                className='font-bold inline-flex items-center'\n                onClick={(e) => {\n                  e.preventDefault()\n                  setValue('quantity', usersTokenBalance, { shouldValidate: true })\n                }}\n              >\n                <img\n                  src={iconSrc}\n                  className='mr-2'\n                  style={{ maxHeight: 12 }}\n                /> {numberWithCommas(usersTokenBalance, { precision: 2 })} {tickerUpcased}\n              </button>\n          </>}\n        />\n      </div>\n      <div\n        className='mt-2 text-sm text-highlight-1 font-bold mb-2'\n        style={{\n          minHeight: 24\n        }}\n      >\n        {Object.values(errors).length > 0 ? <>\n          <ErrorsBox\n            errors={errors}\n          />\n        </> : <>\n          <div\n            className='odds-box'\n          >\n            <Odds\n              sayEveryWeek\n              showLabel\n              splitLines\n              pool={pool}\n              usersBalance={usersTicketBalance}\n              additionalQuantity={watchQuantity}\n            />\n          </div>\n        </>}\n      </div>\n\n      \n\n      <div\n        className='flex flex-col mx-auto w-full mx-auto items-center justify-center'\n      >\n        <ButtonDrawer>\n          {continueButton}\n        </ButtonDrawer>\n      </div>\n\n\n    </form>\n\n    {remainingTickets && remainingTickets.lt('1000000') && <>\n      <div\n        className='mt-4 xs:mt-10 sm:mt-20 p-2 liquidity-cap text-xxs xs:text-xs sm:text-base text-white bg-raspberry border-highlight-7 border-2 rounded-sm'\n      >\n        <span\n          className={`text-red font-bold block sm:inline-block text-lg sm:text-base sm:relative`}\n          role='img'\n          aria-label='double exclaimation'\n          style={{\n            top: 1\n          }}\n        >&#x203c;</span> {t('onlyAmountTicketsRemaining', {\n          amount: numberWithCommas(remainingTickets.toString(), { precision: 0 })\n        })} <span\n          className={`text-red font-bold hidden sm:inline-block sm:relative`}\n          role='img'\n          aria-label='double exclaimation'\n          style={{\n            top: 1\n          }}\n        >&#x203c;</span>\n      </div>\n    </>}\n  </>\n}\n"]},"metadata":{},"sourceType":"module"}